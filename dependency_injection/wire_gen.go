// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package dependencyinjection

import (
	"context"
	"fmt"
	"github.com/aws/aws-sdk-go-v2/service/dynamodb"
	"github.com/aws/aws-sdk-go-v2/service/sqs"
	"github.com/gin-gonic/gin"
	"github.com/google/wire"
	"github.com/notifique/controllers"
	"github.com/notifique/internal"
	"github.com/notifique/internal/broker"
	"github.com/notifique/internal/config"
	"github.com/notifique/internal/deployments"
	"github.com/notifique/internal/publisher"
	storage2 "github.com/notifique/internal/storage/dynamodb"
	"github.com/notifique/internal/storage/postgres"
	"github.com/notifique/routes"
	"github.com/notifique/test/containers"
	"github.com/redis/go-redis/v9"
)

// Injectors from wire.go:

func InjectPgPrioritySQS(envfile string) (*gin.Engine, error) {
	envConfig, err := config.NewEnvConfig(envfile)
	if err != nil {
		return nil, err
	}
	postgresStorage, err := storage.NewPostgresStorage(envConfig)
	if err != nil {
		return nil, err
	}
	client, err := publisher.NewSQSClient(envConfig)
	if err != nil {
		return nil, err
	}
	sqsPublisher := publisher.NewSQSPublisher(client)
	priorityPublisher := publisher.NewPriorityPublisher(sqsPublisher, envConfig, postgresStorage)
	redisClient, err := internal.NewRedisClient(envConfig)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(redisClient, envConfig)
	if err != nil {
		return nil, err
	}
	engine := NewEngine(postgresStorage, priorityPublisher, redisBroker)
	return engine, nil
}

func InjectPgPriorityRabbitMQ(envfile string) (*gin.Engine, error) {
	envConfig, err := config.NewEnvConfig(envfile)
	if err != nil {
		return nil, err
	}
	postgresStorage, err := storage.NewPostgresStorage(envConfig)
	if err != nil {
		return nil, err
	}
	rabbitMQClient, err := publisher.NewRabbitMQClient(envConfig)
	if err != nil {
		return nil, err
	}
	rabbitMQPublisher := publisher.NewRabbitMQPublisher(rabbitMQClient)
	priorityPublisher := publisher.NewPriorityPublisher(rabbitMQPublisher, envConfig, postgresStorage)
	client, err := internal.NewRedisClient(envConfig)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(client, envConfig)
	if err != nil {
		return nil, err
	}
	engine := NewEngine(postgresStorage, priorityPublisher, redisBroker)
	return engine, nil
}

func InjectDynamoPrioritySQS(envfile string) (*gin.Engine, error) {
	envConfig, err := config.NewEnvConfig(envfile)
	if err != nil {
		return nil, err
	}
	client, err := storage2.NewDynamoDBClient(envConfig)
	if err != nil {
		return nil, err
	}
	dynamoDBStorage := storage2.NewDynamoDBStorage(client)
	sqsClient, err := publisher.NewSQSClient(envConfig)
	if err != nil {
		return nil, err
	}
	sqsPublisher := publisher.NewSQSPublisher(sqsClient)
	priorityPublisher := publisher.NewPriorityPublisher(sqsPublisher, envConfig, dynamoDBStorage)
	redisClient, err := internal.NewRedisClient(envConfig)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(redisClient, envConfig)
	if err != nil {
		return nil, err
	}
	engine := NewEngine(dynamoDBStorage, priorityPublisher, redisBroker)
	return engine, nil
}

func InjectDynamoPriorityRabbitMQ(envfile string) (*gin.Engine, error) {
	envConfig, err := config.NewEnvConfig(envfile)
	if err != nil {
		return nil, err
	}
	client, err := storage2.NewDynamoDBClient(envConfig)
	if err != nil {
		return nil, err
	}
	dynamoDBStorage := storage2.NewDynamoDBStorage(client)
	rabbitMQClient, err := publisher.NewRabbitMQClient(envConfig)
	if err != nil {
		return nil, err
	}
	rabbitMQPublisher := publisher.NewRabbitMQPublisher(rabbitMQClient)
	priorityPublisher := publisher.NewPriorityPublisher(rabbitMQPublisher, envConfig, dynamoDBStorage)
	redisClient, err := internal.NewRedisClient(envConfig)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(redisClient, envConfig)
	if err != nil {
		return nil, err
	}
	engine := NewEngine(dynamoDBStorage, priorityPublisher, redisBroker)
	return engine, nil
}

func InjectPgPrioritySQSIntegrationTest(ctx context.Context) (*PostgresPrioritySQSIntegrationTest, error) {
	postgresContainer, err := containers.NewPostgresContainer(ctx)
	if err != nil {
		return nil, err
	}
	sqsPriorityContainer, err := containers.NewSQSPriorityContainer(ctx)
	if err != nil {
		return nil, err
	}
	redisContainer, err := containers.NewRedisContainer(ctx)
	if err != nil {
		return nil, err
	}
	postgresStorage, err := storage.NewPostgresStorage(postgresContainer)
	if err != nil {
		return nil, err
	}
	client, err := publisher.NewSQSClient(sqsPriorityContainer)
	if err != nil {
		return nil, err
	}
	sqsPublisher := publisher.NewSQSPublisher(client)
	redisClient, err := internal.NewRedisClient(redisContainer)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(redisClient, redisContainer)
	if err != nil {
		return nil, err
	}
	priorityPublisher := publisher.NewPriorityPublisher(sqsPublisher, sqsPriorityContainer, postgresStorage)
	engine := NewEngine(postgresStorage, priorityPublisher, redisBroker)
	postgresPrioritySQSIntegrationTest := &PostgresPrioritySQSIntegrationTest{
		PostgresContainer: postgresContainer,
		SQSContainer:      sqsPriorityContainer,
		RedisContainer:    redisContainer,
		Storage:           postgresStorage,
		Publisher:         sqsPublisher,
		Broker:            redisBroker,
		Engine:            engine,
	}
	return postgresPrioritySQSIntegrationTest, nil
}

func InjectPgPriorityRabbitMQIntegrationTest(ctx context.Context) (*PostgresPriorityRabbitMQIntegrationTest, error) {
	postgresContainer, err := containers.NewPostgresContainer(ctx)
	if err != nil {
		return nil, err
	}
	rabbitMQPriorityContainer, err := containers.NewRabbitMQPriorityContainer(ctx)
	if err != nil {
		return nil, err
	}
	rabbitMQClient, err := publisher.NewRabbitMQClient(rabbitMQPriorityContainer)
	if err != nil {
		return nil, err
	}
	redisContainer, err := containers.NewRedisContainer(ctx)
	if err != nil {
		return nil, err
	}
	postgresStorage, err := storage.NewPostgresStorage(postgresContainer)
	if err != nil {
		return nil, err
	}
	rabbitMQPublisher := publisher.NewRabbitMQPublisher(rabbitMQClient)
	priorityPublisher := publisher.NewPriorityPublisher(rabbitMQPublisher, rabbitMQPriorityContainer, postgresStorage)
	client, err := internal.NewRedisClient(redisContainer)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(client, redisContainer)
	if err != nil {
		return nil, err
	}
	engine := NewEngine(postgresStorage, priorityPublisher, redisBroker)
	postgresPriorityRabbitMQIntegrationTest := &PostgresPriorityRabbitMQIntegrationTest{
		PostgresContainer: postgresContainer,
		RabbitMQContainer: rabbitMQPriorityContainer,
		RabbitMQClient:    rabbitMQClient,
		RedisContainer:    redisContainer,
		Storage:           postgresStorage,
		Publisher:         priorityPublisher,
		Broker:            redisBroker,
		Engine:            engine,
	}
	return postgresPriorityRabbitMQIntegrationTest, nil
}

func InjectDynamoPrioritySQSIntegrationTest(ctx context.Context) (*DynamoPrioritySQSIntegrationTest, error) {
	dynamoContainer, err := containers.NewDynamoContainer(ctx)
	if err != nil {
		return nil, err
	}
	sqsPriorityContainer, err := containers.NewSQSPriorityContainer(ctx)
	if err != nil {
		return nil, err
	}
	redisContainer, err := containers.NewRedisContainer(ctx)
	if err != nil {
		return nil, err
	}
	client, err := storage2.NewDynamoDBClient(dynamoContainer)
	if err != nil {
		return nil, err
	}
	dynamoDBStorage := storage2.NewDynamoDBStorage(client)
	sqsClient, err := publisher.NewSQSClient(sqsPriorityContainer)
	if err != nil {
		return nil, err
	}
	sqsPublisher := publisher.NewSQSPublisher(sqsClient)
	redisClient, err := internal.NewRedisClient(redisContainer)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(redisClient, redisContainer)
	if err != nil {
		return nil, err
	}
	priorityPublisher := publisher.NewPriorityPublisher(sqsPublisher, sqsPriorityContainer, dynamoDBStorage)
	engine := NewEngine(dynamoDBStorage, priorityPublisher, redisBroker)
	dynamoPrioritySQSIntegrationTest := &DynamoPrioritySQSIntegrationTest{
		DynamoContainer: dynamoContainer,
		SQSContainer:    sqsPriorityContainer,
		RedisContainer:  redisContainer,
		Storage:         dynamoDBStorage,
		Publisher:       sqsPublisher,
		Broker:          redisBroker,
		Engine:          engine,
	}
	return dynamoPrioritySQSIntegrationTest, nil
}

func InjectDynamoPriorityRabbitMQIntegrationTest(ctx context.Context) (*DynamoPriorityRabbitMQIntegrationTest, error) {
	dynamoContainer, err := containers.NewDynamoContainer(ctx)
	if err != nil {
		return nil, err
	}
	rabbitMQPriorityContainer, err := containers.NewRabbitMQPriorityContainer(ctx)
	if err != nil {
		return nil, err
	}
	rabbitMQClient, err := publisher.NewRabbitMQClient(rabbitMQPriorityContainer)
	if err != nil {
		return nil, err
	}
	redisContainer, err := containers.NewRedisContainer(ctx)
	if err != nil {
		return nil, err
	}
	client, err := storage2.NewDynamoDBClient(dynamoContainer)
	if err != nil {
		return nil, err
	}
	dynamoDBStorage := storage2.NewDynamoDBStorage(client)
	rabbitMQPublisher := publisher.NewRabbitMQPublisher(rabbitMQClient)
	priorityPublisher := publisher.NewPriorityPublisher(rabbitMQPublisher, rabbitMQPriorityContainer, dynamoDBStorage)
	redisClient, err := internal.NewRedisClient(redisContainer)
	if err != nil {
		return nil, err
	}
	redisBroker, err := broker.NewRedisBroker(redisClient, redisContainer)
	if err != nil {
		return nil, err
	}
	engine := NewEngine(dynamoDBStorage, priorityPublisher, redisBroker)
	dynamoPriorityRabbitMQIntegrationTest := &DynamoPriorityRabbitMQIntegrationTest{
		DynamoContainer:   dynamoContainer,
		RabbitMQContainer: rabbitMQPriorityContainer,
		RabbitMQClient:    rabbitMQClient,
		RedisContainer:    redisContainer,
		Storage:           dynamoDBStorage,
		Publisher:         priorityPublisher,
		Broker:            redisBroker,
		Engine:            engine,
	}
	return dynamoPriorityRabbitMQIntegrationTest, nil
}

func InjectRabbitMQPriorityDeployer(envfile string) (*deployments.RabbitMQPriorityDeployer, func(), error) {
	envConfig, err := config.NewEnvConfig(envfile)
	if err != nil {
		return nil, nil, err
	}
	rabbitMQPriorityDeployer, cleanup, err := deployments.NewRabbitMQPriorityDeployer(envConfig)
	if err != nil {
		return nil, nil, err
	}
	return rabbitMQPriorityDeployer, func() {
		cleanup()
	}, nil
}

func InjectSQSPriorityDeployer(envfile string) (*deployments.SQSPriorityDeployer, func(), error) {
	envConfig, err := config.NewEnvConfig(envfile)
	if err != nil {
		return nil, nil, err
	}
	sqsPriorityDeployer, cleanup, err := deployments.NewSQSPriorityDeployer(envConfig)
	if err != nil {
		return nil, nil, err
	}
	return sqsPriorityDeployer, func() {
		cleanup()
	}, nil
}

// wire.go:

type Storage interface {
	controllers.NotificationStorage
	controllers.UserStorage
	controllers.DistributionListStorage
}

type PostgresPrioritySQSIntegrationTest struct {
	PostgresContainer *containers.PostgresContainer
	SQSContainer      *containers.SQSPriorityContainer
	RedisContainer    *containers.RedisContainer
	Storage           *storage.PostgresStorage
	Publisher         *publisher.SQSPublisher
	Broker            *broker.RedisBroker
	Engine            *gin.Engine
}

type DynamoPrioritySQSIntegrationTest struct {
	DynamoContainer *containers.DynamoContainer
	SQSContainer    *containers.SQSPriorityContainer
	RedisContainer  *containers.RedisContainer
	Storage         *storage2.DynamoDBStorage
	Publisher       *publisher.SQSPublisher
	Broker          *broker.RedisBroker
	Engine          *gin.Engine
}

type PostgresPriorityRabbitMQIntegrationTest struct {
	PostgresContainer *containers.PostgresContainer
	RabbitMQContainer *containers.RabbitMQPriorityContainer
	RabbitMQClient    *publisher.RabbitMQClient
	RedisContainer    *containers.RedisContainer
	Storage           *storage.PostgresStorage
	Publisher         *publisher.PriorityPublisher
	Broker            *broker.RedisBroker
	Engine            *gin.Engine
}

type DynamoPriorityRabbitMQIntegrationTest struct {
	DynamoContainer   *containers.DynamoContainer
	RabbitMQContainer *containers.RabbitMQPriorityContainer
	RabbitMQClient    *publisher.RabbitMQClient
	RedisContainer    *containers.RedisContainer
	Storage           *storage2.DynamoDBStorage
	Publisher         *publisher.PriorityPublisher
	Broker            *broker.RedisBroker
	Engine            *gin.Engine
}

func (it *PostgresPrioritySQSIntegrationTest) Cleanup() error {

	if err := it.PostgresContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup postgres container - %w", err)
	}

	if err := it.SQSContainer.Container.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup sqs container - %w", err)
	}

	if err := it.RedisContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup redis container - %w", err)
	}

	return nil
}

func (it *DynamoPrioritySQSIntegrationTest) Cleanup() error {

	if err := it.DynamoContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup dynamo container - %w", err)
	}

	if err := it.SQSContainer.Container.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup sqs container - %w", err)
	}

	if err := it.RedisContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup redis container - %w", err)
	}

	return nil
}

func (it *PostgresPriorityRabbitMQIntegrationTest) Cleanup() error {

	if err := it.PostgresContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup postgres container - %w", err)
	}

	if err := it.RabbitMQClient.Close(); err != nil {
		return fmt.Errorf("failed to close rabbitmq connection - %w", err)
	}

	if err := it.RabbitMQContainer.Container.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup rabbitmq container - %w", err)
	}

	if err := it.RedisContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup redis container - %w", err)
	}

	return nil
}

func (it *DynamoPriorityRabbitMQIntegrationTest) Cleanup() error {

	if err := it.DynamoContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup dynamo container - %w", err)
	}

	if err := it.RabbitMQClient.Close(); err != nil {
		return fmt.Errorf("failed to close rabbitmq connection - %w", err)
	}

	if err := it.RabbitMQContainer.Container.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup rabbitmq container - %w", err)
	}

	if err := it.RedisContainer.Cleanup(); err != nil {
		return fmt.Errorf("failed to cleanup redis container - %w", err)
	}

	return nil
}

var DynamoSet = wire.NewSet(storage2.NewDynamoDBClient, storage2.NewDynamoDBStorage, wire.Bind(new(storage2.DynamoDBAPI), new(*dynamodb.Client)), wire.Bind(new(Storage), new(*storage2.DynamoDBStorage)), wire.Bind(new(controllers.NotificationStorage), new(*storage2.DynamoDBStorage)))

var PostgresSet = wire.NewSet(storage.NewPostgresStorage, wire.Bind(new(Storage), new(*storage.PostgresStorage)), wire.Bind(new(controllers.NotificationStorage), new(*storage.PostgresStorage)))

var SQSPublisherSet = wire.NewSet(publisher.NewSQSClient, publisher.NewSQSPublisher, wire.Bind(new(publisher.SQSAPI), new(*sqs.Client)), wire.Bind(new(publisher.Publisher), new(*publisher.SQSPublisher)))

var RabbitMQPublisherSet = wire.NewSet(publisher.NewRabbitMQClient, publisher.NewRabbitMQPublisher, wire.Bind(new(publisher.RabbitMQAPI), new(*publisher.RabbitMQClient)), wire.Bind(new(publisher.Publisher), new(*publisher.RabbitMQPublisher)))

var PostgresSQSPriroritySet = wire.NewSet(
	PostgresSet,
	SQSPublisherSet, publisher.NewPriorityPublisher, wire.Bind(new(controllers.NotificationPublisher), new(*publisher.PriorityPublisher)),
)

var PostgresRabbitMQPriroritySet = wire.NewSet(
	PostgresSet,
	RabbitMQPublisherSet, publisher.NewPriorityPublisher, wire.Bind(new(controllers.NotificationPublisher), new(*publisher.PriorityPublisher)),
)

var DynamoSQSPriroritySet = wire.NewSet(
	DynamoSet,
	SQSPublisherSet, publisher.NewPriorityPublisher, wire.Bind(new(controllers.NotificationPublisher), new(*publisher.PriorityPublisher)),
)

var DynamoRabbitMQPriroritySet = wire.NewSet(
	DynamoSet,
	RabbitMQPublisherSet, publisher.NewPriorityPublisher, wire.Bind(new(controllers.NotificationPublisher), new(*publisher.PriorityPublisher)),
)

var RedisUserNotificationBrokerSet = wire.NewSet(internal.NewRedisClient, broker.NewRedisBroker, wire.Bind(new(broker.RedisApi), new(*redis.Client)), wire.Bind(new(controllers.UserNotificationBroker), new(*broker.RedisBroker)))

var PostgresContainerSet = wire.NewSet(containers.NewPostgresContainer, wire.Bind(new(storage.PostgresConfigurator), new(*containers.PostgresContainer)))

var SQSPriorityContainerSet = wire.NewSet(containers.NewSQSPriorityContainer, wire.Bind(new(publisher.SQSConfigurator), new(*containers.SQSPriorityContainer)), wire.Bind(new(publisher.PriorityQueueConfigurator), new(*containers.SQSPriorityContainer)))

var RabbitMQPriorityContainerSet = wire.NewSet(containers.NewRabbitMQPriorityContainer, wire.Bind(new(publisher.RabbitMQConfigurator), new(*containers.RabbitMQPriorityContainer)), wire.Bind(new(publisher.PriorityQueueConfigurator), new(*containers.RabbitMQPriorityContainer)))

var DynamoContainerSet = wire.NewSet(containers.NewDynamoContainer, wire.Bind(new(storage2.DynamoConfigurator), new(*containers.DynamoContainer)))

var RedisContainerSet = wire.NewSet(containers.NewRedisContainer, wire.Bind(new(internal.RedisConfigurator), new(*containers.RedisContainer)), wire.Bind(new(broker.BrokerConfigurator), new(*containers.RedisContainer)))

var EnvConfigSet = wire.NewSet(config.NewEnvConfig, wire.Bind(new(storage.PostgresConfigurator), new(*config.EnvConfig)), wire.Bind(new(storage2.DynamoConfigurator), new(*config.EnvConfig)), wire.Bind(new(publisher.PriorityQueueConfigurator), new(*config.EnvConfig)), wire.Bind(new(publisher.SQSConfigurator), new(*config.EnvConfig)), wire.Bind(new(publisher.RabbitMQConfigurator), new(*config.EnvConfig)), wire.Bind(new(publisher.RabbitMQPriorityConfigurator), new(*config.EnvConfig)), wire.Bind(new(publisher.SQSPriorityConfigurator), new(*config.EnvConfig)), wire.Bind(new(internal.RedisConfigurator), new(*config.EnvConfig)), wire.Bind(new(broker.BrokerConfigurator), new(*config.EnvConfig)))

func NewEngine(storage3 Storage, pub controllers.NotificationPublisher, bk controllers.UserNotificationBroker) *gin.Engine {

	r := gin.Default()
	routes.SetupNotificationRoutes(r, storage3, pub)
	routes.SetupDistributionListRoutes(r, storage3)
	routes.SetupUsersRoutes(r, storage3, bk)

	return r
}
